power_usage_washer:
  module: power_usage
  class: PowerUsageAlert
  entity_id: sensor.washer_power
  delay: 3
  input_boolean: input_boolean.washer
  notify:
    - telegram_household
  sonos:
    - media_player.office
    - media_player.kitchen
  done_message: "The wash machine has finished"

power_usage_dryer:
  module: power_usage
  class: PowerUsageAlert
  entity_id: sensor.dryer_power
  delay: 3
  input_boolean: input_boolean.dryer
  notify:
    - telegram_household
  sonos:
    - media_player.office
    - media_player.kitchen
  done_message: "The dryer has finished"

garage_motion_overnight:
  module: generic_alert
  class: GenericAlert
  entity_id: sensor.garage_multisensor_burglar
  input_boolean: input_boolean.garage_motion
  state:
    - 3
    - 8
  tod:
    after: '23:59'
    before: '07:00'
  message: '{{now().strftime("%H:%M:%S %Y-%m-%d")}}: Garage motion detected {{ relative_time(states.cover.garage_multisensor_burglar.last_changed) }} ago.'
  camera: camera.garage
  camera_output: "/downloads/cameras/garage_{alert_id}.jpg"
  repeat:
    - 5
  can_acknowledge: true
  telegram:
    - !secret telegram_group_id_home

garage_door_alert:
  module: generic_alert
  class: GenericAlert
  entity_id: cover.garage_door
  # should account for camera lag
  delay: 3
  input_boolean: input_boolean.garage_door
  state: open
  # TODO: support ack
  message: '{{now().strftime("%H:%M:%S %Y-%m-%d")}}: Garage door open for {{ relative_time(states.cover.garage_door.last_changed) }}. /closeGarage'
  done_message: '{{now().strftime("%H:%M:%S %Y-%m-%d")}}: Garage has been closed.'
  camera: camera.garage
  camera_output: "/downloads/cameras/garage_{alert_id}.jpg"
  repeat:
    - 5
    - 30
    - 60
  can_acknowledge: true
  skip_first: true
  telegram:
    - !secret telegram_group_id_home
